<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>L·ªãch s·ª≠ mua h√†ng - Lego World Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
</head>

<body>
    <!--Header-->
    <iframe src="./components/header.html" width="100%" height="300px" frameborder="0" scrolling="no"></iframe>

    <!--Main-->
    <main class="history-page">
        <section class="history-header">
            <h1>L·ªãch s·ª≠ mua h√†ng</h1>
            <p>Xem l·∫°i c√°c ƒë∆°n h√†ng b·∫°n ƒë√£ mua t·∫°i Lego World Store</p>
        </section>

        <section class="history-list">
            <table class="history-table">
                <thead>
                    <tr>
                        <th>M√£ ƒë∆°n h√†ng</th>
                        <th>Ng√†y ƒë·∫∑t</th>
                        <th>T·ªïng ti·ªÅn</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Chi ti·∫øt</th>
                    </tr>
                </thead>
                <tbody id="order-history">
                    <!-- D·ªØ li·ªáu JavaScript s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
                </tbody>
            </table>
        </section>
    </main>

    <!--Footer-->
    <iframe src="./components/footer.html" width="100%" height="300px" frameborder="0" scrolling="no"></iframe>

    <script>
        // D·ªØ li·ªáu m·∫´u (c√≥ th·ªÉ thay b·∫±ng d·ªØ li·ªáu th·∫≠t t·ª´ localStorage ho·∫∑c API sau n√†y)
        const orders = [
            {
                id: "DH001",
                date: "2025-10-10",
                total: 2200000,
                status: "ƒê√£ giao",
                details: [
                    { name: "B·ªô x·∫øp h√¨nh Lego City", qty: 1, price: 1200000 },
                    { name: "Xe Lego Technic", qty: 1, price: 1000000 }
                ]
            },
            {
                id: "DH002",
                date: "2025-09-25",
                total: 1500000,
                status: "ƒêang giao",
                details: [
                    { name: "B·ªô Lego Friends", qty: 1, price: 1500000 }
                ]
            }
        ];

        const tbody = document.getElementById("order-history");

        function formatCurrency(amount) {
            return amount.toLocaleString("vi-VN") + "‚Ç´";
        }

        function renderOrders() {
            tbody.innerHTML = "";
            orders.forEach(order => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${order.id}</td>
                    <td>${order.date}</td>
                    <td>${formatCurrency(order.total)}</td>
                    <td>${order.status}</td>
                    <td><button class="btn-view" onclick="viewDetails('${order.id}')">Xem</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function viewDetails(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (!order) return;

            let detailText = `üì¶ ƒê∆°n h√†ng: ${order.id}\nNg√†y ƒë·∫∑t: ${order.date}\nTr·∫°ng th√°i: ${order.status}\n\nChi ti·∫øt:\n`;
            order.details.forEach(item => {
                detailText += `- ${item.name} √ó ${item.qty} = ${formatCurrency(item.qty * item.price)}\n`;
            });
            detailText += `\nT·ªïng c·ªông: ${formatCurrency(order.total)}`;

            alert(detailText);
        }

        renderOrders();
    </script>
</body>
</html>
